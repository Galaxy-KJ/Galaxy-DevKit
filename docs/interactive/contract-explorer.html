<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Galaxy DevKit — Contract Explorer</title>
  <style>
    body { font-family: system-ui, -apple-system, 'Segoe UI', Roboto, Arial; margin:0 }
    header { background:#0f172a; color:#fff; padding:12px 16px }
    main { padding:12px }
    .box { border:1px solid #ddd; padding:12px; margin-top:8px }
    pre { background:#f7f7fb; padding:12px; overflow:auto }
  </style>
</head>
<body>
  <header><strong>Galaxy DevKit — Contract Explorer</strong></header>
  <main>
    <p>This lightweight explorer accepts a contract artifact (WASM) or a JSON ABI/metadata and shows quick metadata. It does not execute code — use this to inspect files before deploying.</p>

    <label>Upload WASM file</label>
    <input id="wasmFile" type="file" accept=".wasm" />

    <div class="box">
      <strong>WASM file info</strong>
      <div id="wasmInfo">No file loaded.</div>
    </div>

    <label>Paste contract JSON ABI / metadata</label>
    <textarea id="contractJson" rows="8" style="width:100%;font-family:monospace;" placeholder='Paste contract ABI/metadata JSON'></textarea>

    <div class="box">
      <strong>Parsed ABI / Metadata</strong>
      <pre id="abiPre">No ABI loaded.</pre>
    </div>
  </main>

  <script>
    const wasmFile = document.getElementById('wasmFile');
    const wasmInfo = document.getElementById('wasmInfo');
    const abiInput = document.getElementById('contractJson');
    const abiPre = document.getElementById('abiPre');

    wasmFile.addEventListener('change', (ev) => {
      const f = ev.target.files[0];
      if (!f) return;
      wasmInfo.textContent = `Name: ${f.name} — ${f.size} bytes`;
      // show hex header preview
      const reader = new FileReader();
      reader.onload = () => {
        const arr = new Uint8Array(reader.result);
        const header = arr.slice(0, 8).map(b => b.toString(16).padStart(2, '0')).join(' ');
        wasmInfo.innerHTML += `\nHeader: <code>${header}</code>`;
      };
      reader.readAsArrayBuffer(f);
    });

    abiInput.addEventListener('input', () => {
      const v = abiInput.value.trim();
      if (!v) { abiPre.textContent = 'No ABI loaded.'; return; }
      try { const parsed = JSON.parse(v); abiPre.textContent = JSON.stringify(parsed, null, 2); } catch (e) { abiPre.textContent = 'Invalid JSON: ' + e.message; }
    });
  </script>
</body>
</html>
